{"version":3,"sources":["services/people.js","components/Person.js","components/People.js","components/FilterForm.js","components/PersonForm.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Person","name","number","handleDeletePerson","type","onClick","People","arr","arg","people","nameFilter","i","filter","person","toLowerCase","indexOf","map","key","FilterForm","onChange","placeholder","value","PersonForm","onSubmit","onNameChange","phoneNumber","onNumberChange","Notification","errorMessage","className","message","App","useState","setPeople","newName","setNewName","newPhoneNumber","setNewPhoneNumber","setNameFilter","setErrorMessage","useEffect","peopleService","initialPeople","event","target","preventDefault","personObject","trim","replace","checkPersonOccurrency","toLocaleLowerCase","length","window","confirm","forEach","personToBeDeleted","returnedPerson","personOrig","catch","error","setTimeout","concat","personOfId","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.76d3abfc.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/people'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    // console.log(`Päivitetään id ${id} osoitteessa \"${baseUrl}/${id}\"`)\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    // console.log(`Poistetaan id ${id} osoitteessa \"${baseUrl}/${id}\"`)\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, deletePerson }","import React from 'react'\n\nconst Person = ({ name, number, handleDeletePerson }) => {\n\n    return (\n        <li>\n            {name} {number}\n            <button type=\"submit\" onClick={handleDeletePerson}>delete</button>\n        </li>)\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\n\nconst People = ({ people, nameFilter, i, handleDeletePerson}) => {\n    const filterNames = (arr, arg) => arr.filter(person => person.name.toLowerCase().indexOf(arg.toLowerCase()) !== -1)\n\n    return (\n        <ul>\n            {filterNames(people, nameFilter).map(person => {\n                return <Person  \n                            key={person.id} \n                            id={person.id}\n                            name={person.name}\n                            number={person.number}\n                            handleDeletePerson={() => handleDeletePerson(person.id)}\n                        />\n            })}\n        </ul>\n    )\n}\n\nexport default People","import React from 'react'\n\n\n\nconst FilterForm = ({onChange, nameFilter}) => {\n\n    return (\n        <div>filter shown with  \n          <input  \n                  type=\"text\"\n                  placeholder=\"Search name...\"\n                  value={nameFilter}\n                  onChange={onChange} />\n        </div>\n    )\n}\n\n\nexport default FilterForm","import React from 'react'\n\nconst PersonForm = ({onSubmit, name, onNameChange, phoneNumber, onNumberChange}) => {\n\n    return (\n        <form onSubmit={onSubmit}>\n            <div>\n                name: <input \n                value={name}\n                onChange={onNameChange} />\n            </div>\n            <div>\n                number: <input \n                value={phoneNumber}\n                onChange={onNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\nexport default PersonForm","import React from 'react'\n\nconst Notification = ({ errorMessage }) => {\n    if (errorMessage === null) {\n        return null\n    }\n\n    return (\n        <div className={errorMessage.type}>\n            {errorMessage.message}\n        </div>\n    )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport peopleService from './services/people'\n\nimport People from './components/People'\nimport FilterForm from './components/FilterForm'\nimport PersonForm from './components/PersonForm'\nimport Notification from './components/Notification'\n\n\n\nconst App = () => {\n  const [ people, setPeople] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newPhoneNumber, setNewPhoneNumber ] = useState('')\n  const [ nameFilter, setNameFilter] = useState('')\n  const [ errorMessage, setErrorMessage] = useState(null)\n\n  const handleFilterChange = (event) => {\n      setNameFilter(event.target.value)\n  }\n\n\n\n  useEffect(() => {\n    peopleService\n      .getAll()\n      .then(initialPeople => {\n        setPeople(initialPeople)\n      }) \n    }, [])\n\n\n  const updatePerson = (person) => {\n    peopleService\n          .update(person.id, person)\n          .then(returnedPerson => {\n            setPeople(people.map(personOrig => personOrig.id !== person.id ? personOrig : returnedPerson))\n          })\n          .catch(error => {\n            error.response.data.error \n            ? setErrorMessage({ message: error.response.data.error, type: 'errorUnsuccessful' })\n            : setErrorMessage({ message: `No data of ${person.name} on the server, deleting person`, type: 'errorUnsuccessful' })\n            setTimeout(() => {\n            setErrorMessage(null)\n        }, 5000)\n          })  \n        setErrorMessage({ message: `${person.name}'s number changed to ${person.number}`, type: 'errorSuccessful'})\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n\n      setNewName('')\n      setNewPhoneNumber('')\n  }\n\n\n  const handleAddOrEditPerson = (event) => {\n    event.preventDefault()\n  \n\n    let personObject ={\n      name: '' + newName.trim().replace(/  +/g, ' '),\n      number: '' + newPhoneNumber.trim().replace(/  +/g, ' ')\n    }    \n\n    \n\n    const checkPersonOccurrency = people.filter(person => person.name.toLocaleLowerCase().trim().replace(/  +/g, ' ') === personObject.name.toLocaleLowerCase())\n    \n    if (checkPersonOccurrency.length > 0) {\n       personObject = {...personObject, id: checkPersonOccurrency[0].id}\n    \n    if (window.confirm(`${personObject.name} has ${checkPersonOccurrency.length} entries in phonebook, want replace every entry of old number with a new one?`)) {\n        checkPersonOccurrency.forEach(personToBeDeleted => {\n          if (personToBeDeleted.id !== personObject.id) {\n            peopleService\n              .deletePerson(personToBeDeleted.id)\n              .then(() => { setPeople(people.filter(person => personToBeDeleted.id !== person.id))\n            })\n          }\n        })  \n      updatePerson(personObject)\n      setNewName('')\n      setNewPhoneNumber('')        \n    }\n    } else {\n        peopleService\n          .create(personObject)\n          .then(returnedPerson => {\n            setPeople(people.concat(returnedPerson))\n            setNewName('')\n            setNewPhoneNumber('')\n            setErrorMessage({\n              message: `${personObject.name} and their number ${personObject.number} added to the phonebook`,\n              type: 'errorSuccessful'\n            })\n          })\n          .catch(error => {\n            setErrorMessage({\n            message: error.response.data.error,\n            type: 'errorUnsuccessful'\n            })\n        })\n      }\n    setTimeout(() => {\n    setErrorMessage(null)\n    }, 5000)\n  }  \n\n  const handleNameAdd = (event) => {\n    setNewName(event.target.value)\n  }\n\n  \n  const handlePhoneNumberAdd =(event) => {\n    setNewPhoneNumber(event.target.value)\n  }\n\n  const handleDeletePerson = (id) => {\n    const personOfId = people.filter(person => person.id === id)[0]\n    if (window.confirm(`Delete ${personOfId.name}?`)) {\n      peopleService\n        .deletePerson(id)\n        .then(() => {\n          setPeople(people.filter(person => person.id !== id))\n          setErrorMessage({\n            message: `${personOfId.name} and their number ${personOfId.number} deleted from the phonebook`,\n            type: 'errorSuccessful'\n          })\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n      \n    }\n  }\n  \n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification errorMessage={errorMessage} />\n      <FilterForm onChange={handleFilterChange} nameFilter={nameFilter}/>\n        \n      <h3>add a new</h3>\n      <PersonForm onSubmit={handleAddOrEditPerson} name={newName} onNameChange={handleNameAdd} phoneNumber={newPhoneNumber} onNumberChange={handlePhoneNumberAdd} />\n      <h2>Numbers</h2>\n      <ul>\n        <People\n            people={people}\n            nameFilter={nameFilter}\n            handleDeletePerson={handleDeletePerson} />\n      </ul>\n    </div>\n  )\n\n  }\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n\n"],"sourceRoot":""}