{"version":3,"sources":["services/persons.js","components/Person.js","components/Persons.js","components/FilterForm.js","components/PersonForm.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","console","log","put","delete","Person","name","number","handleDeletePerson","type","onClick","Persons","arr","arg","persons","nameFilter","i","filter","person","toLowerCase","indexOf","map","key","FilterForm","onChange","placeholder","value","PersonForm","onSubmit","onNameChange","phoneNumber","onNumberChange","Notification","errorMessage","className","message","App","useState","setPersons","newName","setNewName","newPhoneNumber","setNewPhoneNumber","setNameFilter","setErrorMessage","useEffect","personsService","initialPersons","event","target","preventDefault","personObject","checkPersonOccurrency","toLocaleLowerCase","length","includes","window","confirm","returnedPerson","personOrig","catch","error","setTimeout","concat","personOfId","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.103a616b.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    console.log(`Päivitetään id ${id} osoitteessa \"${baseUrl}/${id}\"`)\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    console.log(`Poistetaan id ${id} osoitteessa \"${baseUrl}/${id}\"`)\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, deletePerson }","import React from 'react'\n\nconst Person = ({ name, number, handleDeletePerson }) => {\n\n    return (\n        <li>\n            {name} {number}\n            <button type=\"submit\" onClick={handleDeletePerson}>delete</button>\n        </li>)\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\n\nconst Persons = ({ persons, nameFilter, i, handleDeletePerson}) => {\n    const filterNames = (arr, arg) => arr.filter(person => person.name.toLowerCase().indexOf(arg.toLowerCase()) !== -1)\n\n    return (\n        <ul>\n            {filterNames(persons, nameFilter).map(person => {\n                return <Person  \n                            key={person.id} \n                            id={person.id}\n                            name={person.name}\n                            number={person.number}\n                            handleDeletePerson={() => handleDeletePerson(person.id)}\n                        />\n            })}\n        </ul>\n    )\n}\n\nexport default Persons","import React from 'react'\n\n\n\nconst FilterForm = ({onChange, nameFilter}) => {\n\n    return (\n        <div>filter shown with  \n          <input  \n                  type=\"text\"\n                  placeholder=\"Search name...\"\n                  value={nameFilter}\n                  onChange={onChange} />\n        </div>\n    )\n}\n\n\nexport default FilterForm","import React from 'react'\n\nconst PersonForm = ({onSubmit, name, onNameChange, phoneNumber, onNumberChange}) => {\n\n    return (\n        <form onSubmit={onSubmit}>\n            <div>\n                name: <input \n                value={name}\n                onChange={onNameChange} />\n            </div>\n            <div>\n                number: <input \n                value={phoneNumber}\n                onChange={onNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\nexport default PersonForm","import React from 'react'\n\nconst Notification = ({ errorMessage }) => {\n    if (errorMessage === null) {\n        return null\n    }\n\n    return (\n        <div className={errorMessage.type}>\n            {errorMessage.message}\n        </div>\n    )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\n\nimport Persons from './components/Persons'\nimport FilterForm from './components/FilterForm'\nimport PersonForm from './components/PersonForm'\nimport Notification from './components/Notification'\n\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newPhoneNumber, setNewPhoneNumber ] = useState('')\n  const [ nameFilter, setNameFilter] = useState('')\n  const [ errorMessage, setErrorMessage] = useState(null)\n\n  const handleFilterChange = (event) => {\n      setNameFilter(event.target.value)\n  }\n\n\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      }) \n    }, [])\n\n\n\n  const addPerson = (event) => {\n    event.preventDefault()\n  \n    let personObject ={\n      name: newName,\n      number: newPhoneNumber\n    }    \n\n    const checkPersonOccurrency = persons.filter(person => person.name.toLocaleLowerCase() === newName.toLocaleLowerCase())\n    console.log(checkPersonOccurrency)\n    if (checkPersonOccurrency.length === 1) {\n      console.log(checkPersonOccurrency[0].id)\n       personObject = {...personObject, id: checkPersonOccurrency[0].id}\n    }\n\n    if (checkPersonOccurrency.map(person => person.name.toLocaleLowerCase).includes(newName.toLocaleLowerCase, 0)) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n\n        console.log(`${personObject.name} is added, changing number`)\n\n        personsService\n          .update(personObject.id, personObject)\n          .then(returnedPerson => {\n            setPersons(persons.map(personOrig => personOrig.id !== personObject.id ? personOrig : returnedPerson))\n          })\n          .catch(error => {\n            setPersons(persons.filter(person => person.id !== personObject.id))\n            setErrorMessage({ message: `Information of ${personObject.name} has already been removed from server`, type: 'errorUnsuccessful'})\n            setTimeout(() => {\n            setErrorMessage(null)\n        }, 5000)\n          })  \n        setErrorMessage({ message: `${personObject.name}'s number changed to ${personObject.number}`, type: 'errorSuccessful'})\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      } \n\n      setNewName('')\n      setNewPhoneNumber('')\n\n    } else {\n      console.log(`${personObject.name} is a new person, adding person to the database`)\n      personsService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewPhoneNumber('')\n        })\n      setErrorMessage({\n        message: `${personObject.name} and their number ${personObject.number} added to the phonebook`,\n        type: 'errorSuccessful'\n      })\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      }    \n  }\n\n  const handleNameAdd = (event) => {\n    setNewName(event.target.value)\n  }\n\n  \n  const handlePhoneNumberAdd =(event) => {\n    setNewPhoneNumber(event.target.value)\n  }\n\n  const handleDeletePerson = (id) => {\n    const personOfId = persons.filter(person => person.id === id)[0]\n    if (window.confirm(`Delete ${personOfId.name}?`)) {\n      personsService\n        .deletePerson(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== id))\n          setErrorMessage({\n            message: `${personOfId.name} and their number ${personOfId.number} deleted from the phonebook`,\n            type: 'errorSuccessful'\n          })\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n      \n    }\n  }\n  \n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification errorMessage={errorMessage} />\n      <FilterForm onChange={handleFilterChange} nameFilter={nameFilter}/>\n        \n      <h3>add a new</h3>\n      <PersonForm onSubmit={addPerson} name={newName} onNameChange={handleNameAdd} phoneNumber={newPhoneNumber} onNumberChange={handlePhoneNumberAdd} />\n      <h2>Numbers</h2>\n      <ul>\n        <Persons\n            persons={persons}\n            nameFilter={nameFilter}\n            handleDeletePerson={handleDeletePerson} />\n      </ul>\n    </div>\n  )\n\n  }\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n\n"],"sourceRoot":""}